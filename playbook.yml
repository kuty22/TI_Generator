---
- hosts: v1
  pre_tasks:

    - set_fact:
        TI_HOST_CONF: []

    - include_vars: vars/prod.yml

    - set_fact:
        TI_HOST_CONF: "{{TI_HOST_CONF}} +[ TI_HOST_CONF_tmp ]"

    - include_vars: vars/rec.yml

    - set_fact:
        TI_HOST_CONF: "{{TI_HOST_CONF}} +[ TI_HOST_CONF_tmp ]"
  # vars:
  #
  #   TI_HOST_CONF:
  #     - name: Fix prod
  #       file_name: testinfra-v1.py
  #       file_path: ti_result/
  #       ti_generator_target_folder:
  #         - /home/user_test1/
  #         - /home/user_test2/
  #     - name: Fix rec
  #       file_name: testinfra-v2.py
  #       file_path: ti_result/
  #       ti_generator_target_folder:
  #         - /home/user_test2/
  #         - /home/user_test3/
  roles:
    # - role: provisioner
    - role: ti.generator
...
